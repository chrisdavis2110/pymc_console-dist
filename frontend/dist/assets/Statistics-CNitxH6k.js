import{j as e,r as t,at as s,au as a,av as n,aw as i,ax as l,ay as r,o,az as c,aA as d,aB as m,aC as h,aD as u,aE as x,a4 as p,J as f,h as g,aa as j,aF as y,aG as b,a8 as v,p as N,C as k,T as w,aH as M,ak as C}from"./vendor-react-CMBO2Uve.js";import{M as S,N as T,o as $,O as R,Q as A,z as P,J as E,d as L,f as F,e as W,u as D,j as _,S as H,k as z,T as B,U as O,g as U,V as X}from"./index-BMRQUDfL.js";import{T as q}from"./TimeRangeSelector-DkNq3EQv.js";import{u as G}from"./usePolling-BV8q_x_b.js";import{b as I,a as Y,u as K,c as J,d as Q,e as Z,s as V}from"./useThemeColors-9dqVX-5d.js";import{c as ee,R as te,e as se,A as ae,C as ne,X as ie,Y as le,T as re,b as oe,L as ce,a as de}from"./recharts-CriRNhf9.js";import{a as me,c as he,P as ue,b as xe}from"./PageLayout-D_y2M1bR.js";import{C as pe}from"./CollisionExplorerModal-DwRwy9Ai.js";import{R as fe,C as ge}from"./Grid-CojPrzqk.js";import"./vendor-core-XI_xDZ-M.js";import"./deckgl-MTXp-Y3t.js";import"./leaflet-ChRwnWLk.js";function je({children:t,centered:s,className:a}){return e.jsx("div",{className:ee("flex-1 min-h-0",s&&"flex items-center justify-center",a),children:t})}function ye(e){const t=e.match(/\(([^)]+)\)\s*$/);return t?t[1]:e.length>10?e.slice(0,10):e}function be({x:t,y:s,width:a,height:n,name:i,size:l,index:r,colors:o,depth:c,hoveredIndex:d,onHover:m,total:h}){if(1!==c)return null;const u=null!==d&&!(d===r),x=o[r%o.length],p=h>0?l/h*100:0,f=a>36&&n>20,g=a>36&&n>32,j=ye(i);return e.jsxs("g",{onMouseEnter:e=>m(r,e),onMouseLeave:()=>m(null),style:{cursor:"default"},children:[e.jsx("rect",{x:t,y:s,width:a,height:n,fill:x,opacity:u?.4:1,stroke:"rgba(0,0,0,0.2)",strokeWidth:1,rx:3,style:{transition:"opacity 150ms ease"}}),f&&e.jsxs(e.Fragment,{children:[g&&e.jsxs("text",{x:t+4,y:s+n-4-11,textAnchor:"start",dominantBaseline:"auto",fill:"rgba(0,0,0,0.6)",fontSize:8,fontFamily:"'JetBrains Mono', monospace",fontWeight:500,style:{pointerEvents:"none"},children:[p.toFixed(1),"%"]}),e.jsx("text",{x:t+4,y:s+n-4,textAnchor:"start",dominantBaseline:"auto",fill:"rgba(0,0,0,0.85)",fontSize:9,fontFamily:"'JetBrains Mono', monospace",fontWeight:600,style:{pointerEvents:"none"},children:j})]})]})}function ve({data:t,total:s,color:a,position:n,containerWidth:i}){if(!t||!n)return null;const l=(t.value/s*100).toFixed(1),r=i-n.x<184?Math.max(8,n.x-160-8):n.x+16;return e.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:r,top:Math.max(8,n.y-60)},children:e.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 shadow-xl min-w-[140px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm flex-shrink-0",style:{backgroundColor:a}}),e.jsx("span",{className:"type-data-sm font-semibold text-text-primary",children:ye(t.name)})]}),e.jsxs("div",{className:"space-y-0.5 type-data-xs text-text-muted",children:[e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{children:"Count"}),e.jsx("span",{className:"text-text-primary tabular-nums font-medium",children:t.value.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{children:"Share"}),e.jsxs("span",{className:"text-text-primary tabular-nums font-medium",children:[l,"%"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-text-primary tabular-nums font-medium",children:s.toLocaleString()})]})]})]})})}const Ne=t.memo(function({data:s}){var a,n;const[i,l]=t.useState(null),[r,o]=t.useState(null),[c,d]=t.useState(0),m=t.useRef(null),h=I(),{treemapData:u,total:x}=t.useMemo(()=>{const e=s.reduce((e,t)=>e+t.value,0);return{treemapData:[...s].sort((e,t)=>t.value-e.value).filter(t=>e>0&&t.value/e*100>=.5).map((e,t)=>({name:e.name,size:e.value,index:t})),total:e}},[s]),p=t.useCallback((e,t)=>{if(l(e),t&&null!==e){const e=m.current;if(e){const s=e.getBoundingClientRect();d(s.width),o({x:t.clientX-s.left,y:t.clientY-s.top})}}else o(null)},[]),f=null!==i?{name:(null==(a=u[i])?void 0:a.name)??"",value:(null==(n=u[i])?void 0:n.size)??0}:null,g=null!==i?h[i%h.length]:"";return 0===s.length||0===x?e.jsx("div",{className:"h-56 flex items-center justify-center text-text-muted",children:"No packet type data available"}):e.jsxs("div",{className:"relative treemap-container",style:{height:224},ref:m,children:[e.jsx(te,{width:"100%",height:224,minWidth:1,minHeight:1,children:e.jsx(se,{data:u,dataKey:"size",aspectRatio:4/3,stroke:"none",isAnimationActive:!1,content:e.jsx(be,{x:0,y:0,width:0,height:0,name:"",value:0,size:0,index:0,colors:h,depth:0,hoveredIndex:i,onHover:p,total:x})})}),e.jsx(ve,{data:f,total:x,color:g,position:r,containerWidth:c})]})}),ke={[S.REQ]:"var(--pkt-science-req)",[S.ANON_REQ]:"var(--pkt-science-anon-req)",[S.RESPONSE]:"var(--pkt-science-response)",[S.ACK]:"var(--pkt-science-ack)",[S.ADVERT]:"var(--pkt-science-advert)",[S.TXT_MSG]:"var(--pkt-science-txt-msg)",[S.GRP_TXT]:"var(--pkt-science-grp-txt)",[S.GRP_DATA]:"var(--pkt-science-grp-data)",[S.PATH]:"var(--pkt-science-path)",[S.TRACE]:"var(--pkt-science-trace)",[S.MULTIPART]:"var(--pkt-science-multipart)",[S.RAW_CUSTOM]:"var(--pkt-science-raw-custom)"},we="var(--pkt-science-unknown)";function Me(e){return"number"!=typeof e?we:ke[e]??we}function Ce(e){return $[e]??`TYPE_${e.toString(16).toUpperCase()}`}const Se={sf:10,bw:25e4,cr:5,preamble:8};function Te(e,t){if(0===e.length)return[];const s=Math.floor((t-1)/2),a=[];for(let n=0;n<e.length;n++){const t=n>=s?e[n-s]:e[0];a.push(e[n]+(e[n]-t))}return function(e,t){if(0===e.length)return[];const s=2/(t+1),a=[e[0]];for(let n=1;n<e.length;n++)a.push(s*e[n]+(1-s)*a[n-1]);return a}(a,t)}function $e({sortedTypes:s,hoverData:a,highlightedType:n,onTypeHover:i,aggregateShares:l}){const r=t.useMemo(()=>a?new Map(a.items.map(e=>[e.key,e.value])):l,[a,l]);return e.jsx("div",{className:"flex flex-col h-full pl-3",children:e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:s.map(t=>{const s=Me(t.typeNum),l=r.get(t.key)??0,o=l>1e-4,c=n===t.key,d=n&&n!==t.key;return e.jsxs("div",{className:"flex items-center justify-between gap-1.5 type-data-xs leading-tight py-0.5 transition-opacity cursor-pointer "+(a&&!o||d?"opacity-40":c?"opacity-100":""),onMouseEnter:()=>i(t.key),onMouseLeave:()=>i(null),children:[e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-sm flex-shrink-0",style:{backgroundColor:s}}),e.jsx("span",{className:"text-text-muted truncate",children:t.label})]}),o&&e.jsxs("span",{className:"text-text-primary tabular-nums font-mono flex-shrink-0",children:[(100*l).toFixed(1),"%"]})]},t.key)})})})}function Re({mode:t,onChange:s}){return e.jsxs("div",{className:"toggle-group toggle-group-sm",children:[e.jsx("button",{onClick:()=>s("share"),className:"toggle-group-item "+("share"===t?"active":""),children:"Total"}),e.jsx("button",{onClick:()=>s("airtime"),className:"toggle-group-item "+("airtime"===t?"active":""),children:"Airtime"})]})}function Ae({smoothing:t,onChange:r}){return e.jsxs("div",{className:"toggle-group toggle-group-sm",children:[e.jsx("button",{onClick:()=>r("raw"),className:"toggle-group-item "+("raw"===t?"active":""),title:"No smoothing (raw values)",children:e.jsx(s,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>r("zlema"),className:"toggle-group-item "+("zlema"===t?"active":""),title:"6-period Zero-Lag EMA (light smoothing)",children:e.jsx(a,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>r("ema"),className:"toggle-group-item "+("ema"===t?"active":""),title:"12-period Zero-Lag EMA (moderate smoothing)",children:e.jsx(n,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>r("smooth"),className:"toggle-group-item "+("smooth"===t?"active":""),title:"24-period Zero-Lag EMA (heavy smoothing)",children:e.jsx(i,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>r("ultra"),className:"toggle-group-item "+("ultra"===t?"active":""),title:"96-period Zero-Lag EMA (ultra smoothing)",children:e.jsx(l,{className:"w-3.5 h-3.5"})})]})}const Pe=t.memo(function({packets:s,startTs:a,endTs:n,bucketCount:i,radioConfig:l=Se,mode:o="share",smoothing:c="raw"}){const d=Y(),[m,h]=t.useState(null),u=t.useRef(null),x=t.useRef(null),[p,f]=t.useState(null),[g,j]=t.useState([]),y=t.useRef(null),b=t.useRef(0);t.useEffect(()=>{const e=Math.abs(s.length-b.current);if(0===e&&g.length>0)return;y.current&&clearTimeout(y.current);const t=e>100?50:500;return y.current=setTimeout(()=>{b.current=s.length,j(s)},t),()=>{y.current&&clearTimeout(y.current)}},[s,g.length]);const v=t.useMemo(()=>function(e){const t=new Map;for(const a of e){const e=a.type??a.payload_type??-1;t.set(e,(t.get(e)??0)+1)}const s=[];for(const[a,n]of t)s.push({typeNum:a,key:`TYPE_${a}`,label:Ce(a),totalCount:n});return s.sort((e,t)=>t.totalCount-e.totalCount)}(g),[g]),N=t.useMemo(()=>function(e,t,s,a,n,i){const l=s-t,r=l/a,o=1e3*r,c=[];for(let d=0;d<a;d++){const e=t+d*r,s=new Date(1e3*e),a=l/3600>24?s.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit",hour12:!1}):s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});c.push({timestamp:e,time:a,counts:{},shares:{},airtimes:{},total:0,totalAirtime:0,bucketDurationMs:o});for(const t of i)c[d].counts[t.key]=0,c[d].airtimes[t.key]=0}for(const d of e){const e=d.timestamp;if(e<t||e>=s)continue;const i=Math.min(Math.floor((e-t)/r),a-1),l=`TYPE_${d.type??d.payload_type??-1}`;c[i].counts[l]=(c[i].counts[l]??0)+1,c[i].total++;const o=d.length??d.payload_length??32,m=T(o,{spreadingFactor:n.sf,bandwidthHz:n.bw,codingRate:n.cr,preambleLength:n.preamble});c[i].airtimes[l]=(c[i].airtimes[l]??0)+m,c[i].totalAirtime+=m}for(const d of c)for(const e of i)d.total>0?d.shares[e.key]=d.counts[e.key]/d.total*100:d.shares[e.key]=0;return c}(g,a,n,i,l,v),[g,a,n,i,l,v]),k=t.useMemo(()=>v.reduce((e,t)=>e+t.totalCount,0),[v]),{sortedTypes:w,aggregateShares:M}=t.useMemo(()=>{const e=new Map;if("share"===o){if(k>0)for(const t of v)e.set(t.key,t.totalCount/k)}else{let t=0;const s=new Map;for(const e of N){t+=e.totalAirtime;for(const t of v){const a=s.get(t.key)??0;s.set(t.key,a+(e.airtimes[t.key]??0))}}if(t>0)for(const a of v)e.set(a.key,(s.get(a.key)??0)/t)}return{sortedTypes:[...v].sort((t,s)=>{const a=e.get(t.key)??0;return(e.get(s.key)??0)-a}),aggregateShares:e}},[v,k,o,N]),C=t.useMemo(()=>function(e,t,s,a="raw"){const n=function(e,t,s){if(e.length<=360)return e;const a=Math.ceil(e.length/360),n=[];for(let i=0;i<e.length;i+=a){const t=e.slice(i,Math.min(i+a,e.length));if(0===t.length)continue;const l={timestamp:t[0].timestamp,time:t[0].time,counts:{},shares:{},airtimes:{},total:0,totalAirtime:0,bucketDurationMs:t[0].bucketDurationMs*t.length};for(const e of t){l.total+=e.total,l.totalAirtime+=e.totalAirtime;for(const t of s)l.counts[t.key]=(l.counts[t.key]??0)+(e.counts[t.key]??0),l.airtimes[t.key]=(l.airtimes[t.key]??0)+(e.airtimes[t.key]??0)}for(const e of s)l.shares[e.key]=l.total>0?l.counts[e.key]/l.total*100:0;n.push(l)}return n}(e,0,s),i=n.length,l=s.length,r=Array.from({length:l},()=>new Array(i).fill(0));for(let h=0;h<i;h++){const e=n[h];if("share"===t)for(let t=0;t<l;t++){const a=s[t].key;r[t][h]=e.total>0?(e.counts[a]??0)/e.total:0}else{let t=0;for(let a=0;a<l;a++)t+=e.airtimes[s[a].key]??0;for(let a=0;a<l;a++){const n=s[a].key,i=e.airtimes[n]??0;r[a][h]=t>0?i/t:0}}}const o=Array.from({length:l},()=>new Array(i).fill(0));for(let h=0;h<l;h++)for(let e=0;e<i;e++){let t=0;for(let s=0;s<=h;s++)t+=r[s][e];o[h][e]=t}const c=o.map(e=>function(e,t){switch(t){case"zlema":return Te(e,6);case"ema":return Te(e,12);case"smooth":return Te(e,24);case"ultra":return Te(e,96);default:return e}}(e,a)),d=Array.from({length:l},()=>new Array(i).fill(0));for(let h=0;h<l;h++)for(let e=0;e<i;e++){const t=h>0?c[h-1][e]:0;let s=c[h][e]-t;s<0&&(s=0),s>1&&(s=1),d[h][e]=s}for(let h=0;h<i;h++){let e=0;for(let t=0;t<l;t++)e+=d[t][h];if(e>0&&Math.abs(e-1)>1e-6){const t=1/e;for(let e=0;e<l;e++)d[e][h]*=t}}const m=[];for(let h=0;h<i;h++){const e={timestamp:n[h].timestamp,time:n[h].time};for(let t=0;t<l;t++)e[s[t].key]=d[t][h];m.push(e)}return m}(N,o,w,c),[N,o,w,c]),S=t.useMemo(()=>w.map(e=>e.key).join("-"),[w]),$=t.useCallback(()=>{u.current&&clearTimeout(u.current),x.current=null,h(null)},[]),R=t.useCallback(e=>{f(e)},[]);return 0===g.length?0===s.length?e.jsxs("div",{className:"h-full flex items-center justify-center text-text-muted",children:[e.jsx(r,{className:"w-6 h-6 mr-2 opacity-50"}),e.jsx("span",{children:"No packet data available"})]}):null:e.jsxs("div",{className:"flex h-full min-h-0",children:[e.jsx("div",{className:"flex-1 min-w-0 min-h-0",onMouseLeave:$,children:e.jsx(te,{width:"100%",height:"100%",children:e.jsxs(ae,{data:C,margin:{top:4,right:8,bottom:0,left:0},stackOffset:"none",children:[e.jsx(ne,{strokeDasharray:"3 3",stroke:d.grid,vertical:!1}),e.jsx(ie,{dataKey:"timestamp",type:"number",domain:[a,n],axisLine:!1,tickLine:!1,tick:{fill:d.axisTick,fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dy:8,tickCount:6,tickFormatter:e=>{const t=new Date(1e3*e),s=(n-a)/3600,i=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return s>24?`${t.toLocaleDateString([],{weekday:"short"})} ${i}`:i}}),e.jsx(le,{domain:[0,1],axisLine:!1,tickLine:!1,tick:{fill:d.axisTick,fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dx:-8,width:40,tickFormatter:e=>`${Math.round(100*e)}%`}),e.jsx(re,{content:({active:e,payload:t})=>{var s;if(e&&t&&t.length>0){const e=t[0],a=null==(s=null==e?void 0:e.payload)?void 0:s.timestamp;a&&a!==x.current&&(x.current=a,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{const s=t.filter(e=>e.value>1e-4).map(e=>{const t=v.find(t=>t.key===e.dataKey),s=Me(null==t?void 0:t.typeNum);return{key:e.dataKey,label:(null==t?void 0:t.label)??e.dataKey,value:e.value,color:s}}).sort((e,t)=>t.value-e.value);h({timestamp:a,timeLabel:e.payload.time,items:s})},8))}return null},cursor:{stroke:d.cursor,strokeWidth:1}}),w.map((t,s)=>{const a=Me(t.typeNum),n=p&&p!==t.key;return e.jsx(oe,{type:"stepAfter",dataKey:t.key,name:t.label,stackId:"1",stroke:"none",fill:a,fillOpacity:n?.3:1,dot:!1,isAnimationActive:!1},`${o}-${s}-${t.key}`)})]},S)})}),e.jsx("div",{className:"w-[25%] min-w-[140px] max-w-[180px] flex-shrink-0",onMouseEnter:$,children:e.jsx($e,{sortedTypes:w,hoverData:m,highlightedType:p,onTypeHover:R,aggregateShares:M})})]})}),Ee="airtimeSpectrumBlur";function Le({active:t,payload:s,label:a}){if(!t||!s||0===s.length)return null;const n=s.filter(e=>null!==e.value&&void 0!==e.value);if(0===n.length)return null;const i=a?new Date(1e3*a).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return e.jsxs("div",{className:"bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 text-sm shadow-xl",children:[e.jsx("div",{className:"font-medium text-text-primary mb-1 font-mono",children:i}),n.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-0.5",style:{backgroundColor:t.color}}),e.jsxs("span",{className:"text-text-muted",children:[t.name,":"]}),e.jsxs("span",{className:"text-text-primary tabular-nums font-mono",children:[Number(t.value).toFixed(2),"%"]})]},s))]})}function Fe({payload:t,showDensityScale:s=!1}){return t?e.jsxs("div",{className:"flex items-center gap-4 justify-start text-xs font-mono pl-11",children:[t.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-text-muted",children:t.value})]},s)),s&&e.jsxs("div",{className:"flex items-center gap-1.5 ml-2",children:[e.jsx("div",{className:"w-16 h-2 rounded-sm",style:{background:"linear-gradient(to right, \n                rgb(1,26,51), \n                rgb(53,82,85), \n                rgb(85,121,74), \n                rgb(150,149,53), \n                rgb(228,168,98), \n                rgb(250,195,165)\n              )"}}),e.jsx("span",{className:"text-text-muted",children:"Density"})]})]}):null}const We=[[1,26,51],[20,43,67],[38,62,79],[53,82,85],[67,102,83],[85,121,74],[112,137,62],[150,149,53],[192,156,58],[228,168,98],[250,195,165]];function De(e){const t=Math.max(0,Math.min(1,e))*(We.length-1),s=Math.floor(t),a=Math.min(s+1,We.length-1),n=t-s;return`rgb(${Math.round(We[s][0]+n*(We[a][0]-We[s][0]))},${Math.round(We[s][1]+n*(We[a][1]-We[s][1]))},${Math.round(We[s][2]+n*(We[a][2]-We[s][2]))})`}const _e=t.memo(function({samples:s,startTs:a,endTs:n,yMax:i}){const l=K(),r=J(),c=t.useMemo(()=>void 0!==i?i:function(e){if(0===e.length)return 10;let t=0;for(const n of e){const e=n.rxRolling??n.rxUtilW;e>t&&(t=e)}const s=1.05*t,a=Math.ceil(s);return Math.max(1,a)}(s),[i,s]),d=r.critical,m=l.neutral,{cells:h,cellWidth:u,cellHeight:x}=t.useMemo(()=>function(e,t,s,a,n=120,i=30){const l=100/n+.5+"%",r=100/i+.5+"%";if(0===e.length||s<=t)return{cells:[],cellWidth:l,cellHeight:r};const o=s-t,c=i*n,d=new Float32Array(c),m=new Float32Array(c),h=(e,t)=>e*n+t;for(let b=0;b<e.length;b++){const l=e[b];if(l.timestamp<t||l.timestamp>s)continue;const r=Math.floor((l.timestamp-t)/o*(n-1)),c=Math.max(0,Math.min(n-1,r));if(l.rxUtilW>0){const e=Math.min(l.rxUtilW/a,1),t=Math.floor((1-e)*(i-1));for(let s=t;s<i;s++){const e=i-1-t,a=e>0?1-(s-t)/e*.7:1;d[h(s,c)]+=a}}if(l.txUtilW>0){const e=Math.min(l.txUtilW/a,1),t=Math.floor((1-e)*(i-1));for(let s=t;s<i;s++){const e=i-1-t,a=e>0?1-(s-t)/e*.7:1;m[h(s,c)]+=a}}}const u=[];for(let b=0;b<c;b++)d[b]>0&&u.push(d[b]),m[b]>0&&u.push(m[b]);u.sort((e,t)=>e-t);const x=u.length>0?u[Math.floor(.95*u.length)]:1,p=new Array(n),f=new Array(i),g=100/n,j=100/i;for(let b=0;b<n;b++)p[b]=b*g+"%";for(let b=0;b<i;b++)f[b]=b*j+"%";const y=[];for(let b=0;b<i;b++)for(let e=0;e<n;e++){const t=h(b,e),s=d[t]+.3*m[t];if(s>0&&x>0){const t=Math.min(s/x,1.5),a=Math.sqrt(t/1.5);y.push({xPct:p[e],yPct:f[b],intensity:a})}}return{cells:y,cellWidth:l,cellHeight:r}}(s,a,n,100,200,20),[s,a,n]),p=t.useMemo(()=>0===s.length?[]:s.filter(e=>"number"==typeof e.timestamp&&!isNaN(e.timestamp)).map(e=>{const t=e.rxRolling??e.rxUtilW,s=e.txRolling??e.txUtilW;return{timestamp:e.timestamp,rx:"number"!=typeof t||isNaN(t)?0:t,tx:"number"!=typeof s||isNaN(s)?0:s}}),[s]),f=t.useMemo(()=>{const e=n-a,t=e/3600;return[0,.25,.5,.75,1].map(s=>{const n=new Date(1e3*(a+e*s)),i=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),l=n.toLocaleDateString([],{weekday:"short"});return{pct:s,label:t>24?`${l} ${i}`:i}})},[a,n]);return 0===s.length?e.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No traffic data available"}):e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx("div",{className:"flex items-center flex-shrink-0 text-text-muted",style:{height:20,paddingLeft:44,paddingRight:8},children:e.jsx("div",{className:"relative w-full h-full flex items-center",children:f.map((t,s)=>e.jsxs("div",{className:"absolute flex items-center gap-1 type-data-xs",style:{left:100*t.pct+"%",transform:0===t.pct?"translateX(0)":1===t.pct?"translateX(-100%)":"translateX(-50%)"},children:[e.jsx(o,{className:"w-2.5 h-2.5 opacity-60"}),e.jsx("span",{className:"tabular-nums",children:t.label})]},s))})}),e.jsx("div",{className:"relative",style:{height:160},children:e.jsx(te,{width:"100%",height:160,minWidth:1,minHeight:1,children:e.jsxs(ce,{data:p,margin:{top:4,right:8,bottom:0,left:0},children:[e.jsx(ne,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.04)",vertical:!1}),e.jsx(ie,{dataKey:"timestamp",type:"number",domain:[a,n],axisLine:!1,tickLine:!1,tick:!1,height:0}),e.jsx(le,{axisLine:!1,tickLine:!1,tick:{fill:"rgba(255,255,255,0.4)",fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dx:-8,width:44,tickFormatter:e=>`${e.toFixed(0)}%`,domain:[0,c]}),e.jsx(re,{content:e.jsx(Le,{})}),e.jsx(de,{type:"linear",dataKey:"rx",name:"RX Avg",stroke:d,strokeWidth:2.5,strokeOpacity:.9,dot:!1,connectNulls:!1,isAnimationActive:!1}),e.jsx(de,{type:"linear",dataKey:"tx",name:"TX Avg",stroke:m,strokeWidth:2.5,strokeOpacity:.9,dot:!1,connectNulls:!1,isAnimationActive:!1})]})})}),e.jsx("div",{className:"relative overflow-hidden",style:{height:32,marginLeft:44,marginRight:8},children:e.jsxs("svg",{className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none","aria-hidden":"true",children:[e.jsx("defs",{children:e.jsx("filter",{id:Ee,x:"-100%",y:"-100%",width:"300%",height:"300%",children:e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1 3"})})}),e.jsx("g",{filter:`url(#${Ee})`,children:h.map((t,s)=>e.jsx("rect",{x:t.xPct,y:t.yPct,width:u,height:x,fill:De(t.intensity),opacity:.9},`cell-${s}`))})]})}),e.jsx("div",{className:"flex-shrink-0",style:{height:24,marginTop:8},children:e.jsx(Fe,{payload:[{value:"RX Avg",color:d},{value:"TX Avg",color:m}],showDensityScale:!0})})]})}),He={"1x":1,"2x":2,"4x":4,"8x":8,"16x":16,"36x":36},ze="rgba(255,255,255,0.08)",Be=[1,5,10,25,50,100,150];function Oe(e,t,s,a){const n=Math.PI/180,i=(a-t)*n,l=e*n,r=s*n,o=Math.sin(i)*Math.cos(r),c=Math.cos(l)*Math.sin(r)-Math.sin(l)*Math.cos(r)*Math.cos(i);return(180*Math.atan2(o,c)/Math.PI+360)%360}function Ue(e,t,s,a){const n=Math.PI/180,i=(s-e)*n,l=(a-t)*n,r=Math.sin(i/2)**2+Math.cos(e*n)*Math.cos(s*n)*Math.sin(l/2)**2;return 12742*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))}const Xe=[{min:10,label:"Excellent"},{min:7,label:"Very Good"},{min:4,label:"Good"},{min:1,label:"Fair+"},{min:-2,label:"Fair"},{min:-5,label:"Fair-"},{min:-8,label:"Poor"},{min:-11,label:"Bad"},{min:-1/0,label:"Critical"}];function qe(e,t){return t[V(e)]||"#808080"}const Ge=t.memo(function({neighbors:s,quickNeighbors:a,localLat:n,localLon:i,onStatsChange:l}){const[r,o]=t.useState(null),[d,m]=t.useState(new Set),[h,u]=t.useState({width:0,height:0}),[x,p]=t.useState("1x"),[f,g]=t.useState(1),j=t.useRef(null),y=t.useRef({}),b=t.useRef(null),v=t.useRef(null),N=t.useRef(f);N.current=f;const k=Q(),w=J(),M=Z();t.useEffect(()=>{const e=v.current;if(!e)return;const t=new ResizeObserver(e=>{for(const t of e){const{width:e,height:s}=t.contentRect;e>0&&s>0&&u({width:e,height:s})}});t.observe(e);const s=e.getBoundingClientRect();return s.width>0&&s.height>0&&u({width:s.width,height:s.height}),()=>t.disconnect()},[]);const C=t.useMemo(()=>{const e=new Set;if(a)for(const t of a)e.add(t.hash);return e},[a]),S=t.useMemo(()=>{const e=new Map;if(a)for(const t of a)e.set(t.hash,{snr:t.avgSnr,rssi:t.avgRssi});return e},[a]),{processedNeighbors:T,maxDistance:$,totalNeighbors:R,zeroHopCount:A}=t.useMemo(()=>{const e=[];for(const[a,l]of Object.entries(s)){if(!l.latitude||!l.longitude||0===l.latitude||0===l.longitude)continue;if(!C.has(a))continue;const t=Oe(n,i,l.latitude,l.longitude),s=Ue(n,i,l.latitude,l.longitude),r=S.get(a);e.push({hash:a.slice(0,8),name:l.node_name||l.name||"Unknown",snr:(null==r?void 0:r.snr)??l.snr??null,rssi:(null==r?void 0:r.rssi)??l.rssi??null,bearing:t,distance:s,normalizedDistance:0,lastSeen:l.last_seen,isZeroHop:!0})}const t=1.08*(e.length>0?Math.max(...e.map(e=>e.distance)):0);return e.sort((e,t)=>(e.snr??-1/0)-(t.snr??-1/0)),{processedNeighbors:e,maxDistance:t,totalNeighbors:e.length,zeroHopCount:e.length}},[s,n,i,C,S]);t.useEffect(()=>{null==l||l({zeroHopCount:A,totalCount:R,maxDistanceKm:$})},[A,R,$]),t.useEffect(()=>{const e=He[x],t=N.current;j.current&&cancelAnimationFrame(j.current);const s=performance.now(),a=n=>{const i=n-s,l=Math.min(i/400,1),r=(o=l)<.5?8*o*o*o*o:1-Math.pow(-2*o+2,4)/2;var o;g(t+(e-t)*r),j.current=l<1?requestAnimationFrame(a):null};return j.current=requestAnimationFrame(a),()=>{j.current&&cancelAnimationFrame(j.current)}},[x]);const P=$/f,E=t.useMemo(()=>Be.filter(e=>e<=1.1*P),[P]);t.useEffect(()=>{const e=[];for(const s of T){const t=y.current[s.hash];void 0!==t&&t!==s.lastSeen&&e.push(s.hash),y.current[s.hash]=s.lastSeen}if(0===e.length)return;queueMicrotask(()=>{m(t=>new Set([...t,...e]))});const t=setTimeout(()=>{m(t=>{const s=new Set(t);return e.forEach(e=>s.delete(e)),s})},600);return()=>clearTimeout(t)},[T]);const L=0!==n&&0!==i,F=t.useMemo(()=>{const{width:e,height:t}=h,s=e/2,a=t/2,n=Math.max(10,e/2-12),i=Math.max(10,t/2-12),l=Math.max(10,n-16),r=Math.max(10,i-16);return{width:e,height:t,centerX:s,centerY:a,maxRadiusX:l,maxRadiusY:r,labelRadiusX:n,labelRadiusY:i,cornerRadius:.2*Math.min(l,r)}},[h]),{width:W,height:D,centerX:_,centerY:H,maxRadiusX:z,maxRadiusY:B,labelRadiusX:O,labelRadiusY:U,cornerRadius:X}=F,q=t.useCallback((e,t=1)=>{const s=z*t,a=B*t,n=Math.min(X*t,s,a),i=(e%360+360)%360,l=i*Math.PI/180,r=180*Math.atan2(a-n,s-n)/Math.PI;let o,c;if(i<=45-r||i>315+r){const e=Math.tan(l);o=Math.max(_-s+n,Math.min(_+s-n,_+a*e*(s/a))),c=H-a}else if(i>45-r&&i<=45+r)o=_+s-n+n*Math.sin(l),c=H-a+n-n*Math.cos(l);else if(i>45+r&&i<=135-r){const e=1/Math.tan(l);c=Math.max(H-a+n,Math.min(H+a-n,H-s*e*(a/s))),o=_+s}else if(i>135-r&&i<=135+r)o=_+s-n+n*Math.sin(l),c=H+a-n-n*Math.cos(l);else if(i>135+r&&i<=225-r){const e=Math.tan(l);o=Math.max(_-s+n,Math.min(_+s-n,_-a*e*(s/a))),c=H+a}else if(i>225-r&&i<=225+r)o=_-s+n+n*Math.sin(l),c=H+a-n-n*Math.cos(l);else if(i>225+r&&i<=315-r){const e=1/Math.tan(l);c=Math.max(H-a+n,Math.min(H+a-n,H-s*e*(a/s))),o=_-s}else o=_-s+n+n*Math.sin(l),c=H-a+n-n*Math.cos(l);return{x:o,y:c}},[_,H,z,B,X]),G=t.useCallback((e,t)=>{const s=q(e,1);return{x:_+(s.x-_)*t,y:H+(s.y-H)*t}},[q,_,H]),I=t.useCallback(e=>({N:{x:_,y:H-U},S:{x:_,y:H+U},E:{x:_+O,y:H},W:{x:_-O,y:H},NE:{x:_+O,y:H-U},SE:{x:_+O,y:H+U},SW:{x:_-O,y:H+U},NW:{x:_-O,y:H-U}}[e]),[_,H,O,U]),Y=t.useCallback(e=>{const t=z*e,s=B*e,a=Math.min(X*e,t,s),n=_-t,i=_+t,l=H-s,r=H+s;return[`M ${n+a} ${l}`,`L ${i-a} ${l}`,`Q ${i} ${l} ${i} ${l+a}`,`L ${i} ${r-a}`,`Q ${i} ${r} ${i-a} ${r}`,`L ${n+a} ${r}`,`Q ${n} ${r} ${n} ${r-a}`,`L ${n} ${l+a}`,`Q ${n} ${l} ${n+a} ${l}`,"Z"].join(" ")},[_,H,z,B,X]),K=t.useCallback(e=>{o(e)},[]),V=t.useCallback(e=>{p(e)},[]),ee=t.useCallback(e=>$<=0?0:e/$*f,[$,f]),te=e=>`${e}km`,se=t.useMemo(()=>{const e=E.map(e=>{const t=e/$*f;return{km:e,scale:t,labelY:H-B*t*.71}}).filter(e=>e.scale<=1.05&&e.scale>=.02).sort((e,t)=>t.km-e.km),t=[];for(const s of e)t.some(e=>Math.abs(e.labelY-s.labelY)<28)||t.push(s);return t},[E,$,f,H,B]),ae=h.width>0&&h.height>0;return L?0===R?e.jsxs("div",{ref:b,className:"flex flex-col items-center justify-center h-full text-text-muted",children:[e.jsx(c,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{children:"No nodes with location data"})]}):e.jsxs("div",{ref:b,className:"relative h-full w-full flex overflow-hidden",children:[e.jsx("div",{ref:v,className:"relative flex-1 min-w-0 h-full",children:ae&&e.jsxs("svg",{width:W,height:D,className:"absolute inset-0 z-0",children:[e.jsxs("defs",{children:[e.jsx("style",{children:"\n                @keyframes neighbor-blink-scale {\n                  0%, 100% {\n                    transform: scale(1);\n                    opacity: 0;\n                  }\n                  50% {\n                    transform: scale(1.3);\n                    opacity: 0.8;\n                  }\n                }\n                .neighbor-blink-ring {\n                  transform-origin: center;\n                  animation: neighbor-blink-scale 600ms ease-out forwards;\n                }\n              "}),e.jsx("clipPath",{id:"radar-clip",children:e.jsx("path",{d:Y(1)})})]}),E.map(t=>{const s=ee(t);if(s>1.05||s<.02)return null;const a=se.some(e=>e.km===t),n=_+z*s*.71,i=H-B*s*.71;return e.jsxs("g",{children:[e.jsx("path",{d:Y(s),fill:"none",stroke:ze,strokeWidth:1}),a&&e.jsx("text",{x:n+4,y:i-2,textAnchor:"start",dominantBaseline:"auto",className:"fill-text-secondary",fontSize:10,fontFamily:"'JetBrains Mono', monospace",children:te(t)})]},`ring-${t}`)}),["N","E","S","W"].map(t=>{const s="N"===t||"S"===t,a=s?_:"E"===t?_+z:_-z,n=s?"N"===t?H-B:H+B:H;return e.jsx("line",{x1:_,y1:H,x2:a,y2:n,stroke:ze,strokeWidth:1,strokeDasharray:"4 4"},t)}),["NE","SE","SW","NW"].map(t=>{const s=I(t);return e.jsx("line",{x1:_,y1:H,x2:s.x,y2:s.y,stroke:ze,strokeWidth:1,strokeDasharray:"4 4",strokeOpacity:.5},`diag-${t}`)}),["N","E","S","W"].map(t=>{const s=I(t),a="E"===t?"end":"W"===t?"start":"middle",n="N"===t?"hanging":"S"===t?"auto":"middle";return e.jsx("text",{x:s.x,y:s.y,textAnchor:a,dominantBaseline:n,fill:w.critical,fontSize:16,fontWeight:600,fontFamily:"'JetBrains Mono', monospace","aria-hidden":"true",children:t},t)}),["NE","SE","SW","NW"].map(t=>{const s=I(t),a="NE"===t||"SE"===t?"end":"start",n="NE"===t||"NW"===t?"hanging":"auto";return e.jsx("text",{x:s.x,y:s.y,textAnchor:a,dominantBaseline:n,fill:w.critical,fontSize:16,fontWeight:600,fontFamily:"'JetBrains Mono', monospace","aria-hidden":"true",children:t},t)}),e.jsx("circle",{cx:_,cy:H,r:5,fill:M.chart6,stroke:"rgba(255,255,255,0.3)",strokeWidth:1,role:"img","aria-label":"Local node"}),e.jsx("g",{clipPath:"url(#radar-clip)",children:T.map(t=>{const s=$>0?t.distance/$*f:0;if(s>1)return null;const{x:a,y:n}=G(t.bearing,s),i=null!==t.snr?qe(t.snr,k):"#808080",l=(null==r?void 0:r.hash)===t.hash,o=d.has(t.hash);return e.jsxs("g",{role:"img","aria-label":`${t.name}: ${t.distance.toFixed(1)}km ${t.bearing.toFixed(0)}°`,children:[o&&e.jsx("circle",{cx:a,cy:n,r:10.5,fill:"none",stroke:"rgba(255,255,255,0.9)",strokeWidth:2,className:"neighbor-blink-ring"}),l&&e.jsx("circle",{cx:a,cy:n,r:10.5,fill:i,opacity:.3}),e.jsx("circle",{cx:a,cy:n,r:l?7:5,fill:i,stroke:"rgba(0,0,0,0.5)",strokeWidth:1,style:{cursor:"pointer",transition:"r 0.15s"},onMouseEnter:()=>K(t),onMouseLeave:()=>K(null)})]},t.hash)})})]})}),e.jsx("div",{className:"flex flex-col h-full items-stretch gap-1 py-2 pl-2 flex-shrink-0",role:"group","aria-label":"Zoom level",children:["1x","2x","4x","8x","16x","36x"].map(t=>e.jsx("button",{onClick:()=>V(t),"aria-pressed":x===t,className:"flex flex-1 items-center justify-center px-1.5 text-xs font-medium rounded transition-colors "+(x===t?"bg-accent-primary/20 text-accent-primary":"bg-white/5 text-text-muted hover:bg-white/10 hover:text-text-secondary"),children:t},t))}),r&&e.jsxs("div",{className:"absolute bg-tooltip-bg border border-border-subtle rounded-lg px-3 py-2 text-sm pointer-events-none z-10 shadow-xl",style:{left:"50%",bottom:8,transform:"translateX(-50%)"},children:[e.jsx("div",{className:"font-medium text-text-primary",children:r.name}),e.jsx("div",{className:"text-text-muted text-xs font-mono",children:r.hash}),null!==r.snr?e.jsx("div",{className:"flex gap-3 mt-1 text-xs",children:e.jsxs("span",{children:[e.jsx("span",{className:"text-text-muted",children:"SNR:"})," ",e.jsxs("span",{className:"tabular-nums",style:{color:qe(r.snr,k)},children:[r.snr.toFixed(1)," dB"]}),e.jsxs("span",{className:"text-text-muted ml-1",children:["(",(ne=r.snr,(null==(ie=Xe.find(e=>ne>=e.min))?void 0:ie.label)??"Critical"),")"]})]})}):e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"No SNR data"}),e.jsxs("div",{className:"flex gap-3 text-xs",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-text-muted",children:"Distance:"})," ",e.jsxs("span",{className:"tabular-nums text-text-secondary",children:[r.distance.toFixed(2)," km"]})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-text-muted",children:"Bearing:"})," ",e.jsxs("span",{className:"tabular-nums text-text-secondary",children:[r.bearing.toFixed(0),"°"]})]})]})]})]}):e.jsxs("div",{ref:b,className:"flex flex-col items-center justify-center h-full text-text-muted",children:[e.jsx(c,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{children:"Local node coordinates not configured"}),e.jsx("p",{className:"text-xs mt-1",children:"Set latitude/longitude in config to enable"})]});var ne,ie});function Ie(e,t){if(0===e.length)return 0;const s=t/100*(e.length-1),a=Math.floor(s),n=Math.ceil(s);return a===n?e[a]:e[a]+(e[n]-e[a])*(s-a)}const Ye=t.memo(function({timestamps:s,values:a,onStatsChange:n}){var i,l;const r=J(),[o,c]=t.useState(!0),h=t.useMemo(()=>{if(0===a.length)return null;const e=Math.min(...a),t=Math.max(...a),s=a.reduce((e,t)=>e+t,0)/a.length,n=[...a].sort((e,t)=>e-t);return{min:e,max:t,avg:s,p5:Ie(n,5),p95:Ie(n,95)}},[a]);t.useEffect(()=>{null==n||n(h)},[h]);const u=t.useCallback(()=>{c(e=>!e)},[]),{heatmapData:x,xLabels:p,yLabels:f}=t.useMemo(()=>{if(0===s.length||0===a.length||!h)return{heatmapData:null,xLabels:[],yLabels:[]};let e,t;if(o){const s=.1*(h.p95-h.p5||1);e=h.p5-s,t=h.p95+s}else{const s=.1*(h.max-h.min||1);e=h.min-s,t=h.max+s}const n=t-e,i=s[0],l=s[s.length-1]-i||1,r=new Float32Array(2*s.length);for(let o=0;o<s.length;o++){const c=(s[o]-i)/l,d=1-(Math.max(e,Math.min(t,a[o]))-e)/n;r[2*o]=c,r[2*o+1]=d}const c=[];for(let s=0;s<=5;s++){const e=i+l*s/5;c.push({pos:s/5*100,label:new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}const d=[];for(let s=0;s<=4;s++){const t=e+n*s/4;d.push({pos:100*(1-s/4),label:`${Math.round(t)}`})}return{heatmapData:{points:r,count:s.length},xLabels:c,yLabels:d}},[s,a,h,o]),g=t.useRef(null),j=t.useRef(null),[y,b]=t.useState({width:0,height:0}),v=r.critical,N=t.useMemo(()=>{const e=v.replace("#","");return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}},[v]);return t.useEffect(()=>{const e=j.current;if(!e)return;const t=new ResizeObserver(e=>{for(const t of e){const{width:e,height:s}=t.contentRect;e>0&&s>0&&b({width:e,height:s})}});t.observe(e);const s=e.getBoundingClientRect();return s.width>0&&s.height>0&&b({width:s.width,height:s.height}),()=>t.disconnect()},[]),t.useEffect(()=>{const e=g.current;if(!e||!x||0===y.width)return;const t=e.getContext("2d");if(!t)return;const{width:s,height:a}=y,n=window.devicePixelRatio||1;e.width=s*n,e.height=a*n,e.style.width=`${s}px`,e.style.height=`${a}px`,t.scale(n,n),t.clearRect(0,0,s,a);const{points:i,count:l}=x,{r:r,g:o,b:c}=N,d=Math.max(3,Math.min(8,s/l*4));t.globalCompositeOperation="source-over";for(let m=0;m<l;m++){const e=i[2*m]*s,n=i[2*m+1]*a,l=t.createRadialGradient(e,n,0,e,n,d);l.addColorStop(0,`rgba(${r}, ${o}, ${c}, 0.8)`),l.addColorStop(.19,`rgba(${r}, ${o}, ${c}, 0.8)`),l.addColorStop(.2,`rgba(${r}, ${o}, ${c}, 0.1)`),l.addColorStop(1,`rgba(${r}, ${o}, ${c}, 0)`),t.fillStyle=l,t.beginPath(),t.arc(e,n,d,0,2*Math.PI),t.fill()}},[x,y,N]),x?e.jsxs("div",{className:"relative w-full h-full",role:"img","aria-label":`RF noise floor heatmap showing values from ${(null==(i=null==h?void 0:h.min)?void 0:i.toFixed(0))??"N/A"} to ${(null==(l=null==h?void 0:h.max)?void 0:l.toFixed(0))??"N/A"} dBm`,children:[e.jsx("div",{className:"absolute top-0 left-0 flex flex-col justify-between",style:{width:32,bottom:20},"aria-hidden":"true",children:f.map((t,s)=>e.jsx("span",{className:"type-data-xs text-text-muted tabular-nums text-right pr-1.5",style:{position:"absolute",top:`${t.pos}%`,transform:"translateY(-50%)",right:0},children:t.label},s))}),e.jsxs("div",{ref:j,className:"absolute overflow-hidden",style:{left:32,right:0,top:0,bottom:20},children:[e.jsx("svg",{className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none","aria-hidden":"true",children:[0,25,50,75,100].map(t=>e.jsx("line",{x1:"0",y1:`${t}%`,x2:"100%",y2:`${t}%`,stroke:"rgba(255,255,255,0.06)",strokeDasharray:"3 3"},t))}),e.jsx("canvas",{ref:g,className:"absolute inset-0 w-full h-full","aria-hidden":"true"}),e.jsx("button",{type:"button",onClick:u,className:"absolute bottom-1 right-1 p-1.5 rounded bg-tooltip-bg/80 hover:bg-tooltip-bg active:bg-tooltip-bg transition-colors touch-manipulation",title:o?"Show full range (min/max)":"Show trimmed range (P5-P95)","aria-label":o?"Expand to show full data range":"Shrink to show trimmed percentile range","aria-pressed":!o,children:o?e.jsx(d,{className:"w-3.5 h-3.5 text-text-muted","aria-hidden":"true"}):e.jsx(m,{className:"w-3.5 h-3.5 text-text-muted","aria-hidden":"true"})})]}),e.jsx("div",{className:"absolute left-0 right-0 bottom-0",style:{left:32,height:20},"aria-hidden":"true",children:p.map((t,s)=>e.jsx("span",{className:"type-data-xs text-text-muted tabular-nums absolute top-1",style:{left:`${t.pos}%`,transform:"translateX(-50%)"},children:t.label},s))})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No noise floor data available"})}),Ke={repeater:"var(--signal-critical)",companion:"var(--accent-tertiary)",room_server:"var(--accent-secondary)"};function Je(e){if(e.contact_type){const t=e.contact_type.toLowerCase();if("repeater"===t||"rep"===t)return"repeater";if("room server"===t||"room_server"===t||"room"===t||"server"===t)return"room_server";if("companion"===t||"client"===t||"cli"===t)return"companion"}return e.is_repeater?"repeater":"companion"}const Qe=t.memo(function({neighbors:s}){const a=t.useMemo(()=>{const e={repeater:0,companion:0,room_server:0};for(const a of Object.values(s)){const t=Je(a);e[t]=(e[t]||0)+1}const t=Object.values(e).reduce((e,t)=>e+t,0);return{items:[{label:"Repeaters",count:e.repeater,percent:0,color:Ke.repeater},{label:"Companions",count:e.companion,percent:0,color:Ke.companion},{label:"Room Servers",count:e.room_server,percent:0,color:Ke.room_server}].map(e=>({...e,percent:t>0?e.count/t*100:0})).filter(e=>e.count>0).sort((e,t)=>t.count-e.count),total:t}},[s]);return 0===a.total?e.jsx("div",{className:"h-full flex items-center justify-center text-text-muted type-body-sm",children:"No neighbors discovered yet"}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-evenly",children:a.items.map(t=>e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"type-data-sm text-text-secondary",children:t.label}),e.jsxs("span",{className:"type-data-sm text-text-muted tabular-nums",children:[t.count," ",e.jsxs("span",{className:"text-text-muted/60",children:["(",t.percent.toFixed(0),"%)"]})]})]}),e.jsx("div",{className:"h-2.5 bg-bg-elevated rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${t.percent}%`,backgroundColor:t.color,minWidth:t.count>0?"4px":"0"}})})]},t.label))}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border-subtle",children:[e.jsx("span",{className:"type-data-xs text-text-muted",children:"Total Nodes"}),e.jsx("span",{className:"type-data-sm text-text-primary font-medium tabular-nums",children:a.total})]})]})});function Ze(e,t,s,a=!0,n=60){const i=new Map(e.map(e=>[e.start,e])),l=new Map(t.map(e=>[e.start,e])),r=Array.from(new Set([...i.keys(),...l.keys()])).sort((e,t)=>e-t).map(e=>{const t=i.get(e),a=l.get(e);return{timestamp:e,rxUtilW:((null==t?void 0:t.airtime_ms)??0)/s*100,txUtilW:((null==a?void 0:a.airtime_ms)??0)/s*100}});return a&&r.length>1?function(e,t=60){if(0===e.length)return[];const s=1-Math.pow(.5,1/t),a=Math.min(e.length,Math.max(10,Math.floor(t/3)));let n=0,i=0;for(let l=0;l<a;l++)n+=e[l].rxUtilW,i+=e[l].txUtilW;return n/=a,i/=a,e.map(e=>(n=s*e.rxUtilW+(1-s)*n,i=s*e.txUtilW+(1-s)*i,{...e,rxRolling:n,txRolling:i}))}(r,n):r}const Ve={excellent:"text-signal-excellent",good:"text-signal-good",fair:"text-signal-fair",poor:"text-signal-critical"},et={excellent:"bg-signal-excellent/10",good:"bg-signal-good/10",fair:"bg-signal-fair/10",poor:"bg-signal-critical/10"};function tt({value:t,status:s}){const a={excellent:"bg-signal-excellent",good:"bg-signal-good",fair:"bg-signal-fair",poor:"bg-signal-critical"}[s];return e.jsx("div",{className:"w-full h-2 bg-surface-elevated rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a} transition-all duration-300`,style:{width:`${Math.min(100,Math.max(0,t))}%`}})})}function st(){const s=R(),a=A(),[n,i]=t.useState(null),l=t.useCallback((e,t)=>{i({prefix:e,candidateHashes:t})},[]),r=t.useCallback(()=>{i(null)},[]);if(!a)return e.jsxs(me,{children:[e.jsx(he,{icon:e.jsx(h,{}),title:"Prefix Conflicts",largeTitle:!0}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-text-muted",children:[e.jsx(u,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"type-data-xs",children:"No topology data available"}),e.jsx("p",{className:"type-data-xs opacity-70",children:"Run deep analysis to see stats"})]})})]});const o=(c=s.avgConfidence)>=.9?"excellent":c>=.7?"good":c>=.5?"fair":"poor";var c;const d=(m=s.collisionRate)<=10?"excellent":m<=25?"good":"poor";var m;const f="poor"===o||"poor"===d?"poor":"fair"===o||"fair"===d?"fair":"good"===o||"good"===d?"good":"excellent",g="excellent"===f||"good"===f?x:p;return e.jsxs(me,{className:"flex flex-col overflow-hidden",children:[e.jsx(he,{icon:e.jsx(h,{}),title:"Prefix Conflicts",largeTitle:!0,actions:e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full ${et[f]}`,children:[e.jsx(g,{className:`w-3.5 h-3.5 ${Ve[f]}`}),e.jsx("span",{className:`type-data-xs font-medium ${Ve[f]}`,children:"excellent"===f?"Excellent":"good"===f?"Good":"fair"===f?"Fair":"Needs Attention"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"cursor-help",title:"Average confidence score across all disambiguated prefixes. Higher = more certain node identification. Based on geographic proximity, co-occurrence patterns, and observation recency.",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-1",children:[e.jsx("span",{className:"type-data-xs text-text-muted",children:"Avg Confidence"}),e.jsxs("span",{className:`type-data-lg font-semibold ${Ve[o]}`,children:[(100*s.avgConfidence).toFixed(1),"%"]})]}),e.jsx(tt,{value:100*s.avgConfidence,status:o})]}),e.jsxs("div",{className:"cursor-help",title:"Percentage of 2-character prefixes that match multiple known nodes. Lower is better. Collisions require disambiguation to determine the correct node.",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-1",children:[e.jsx("span",{className:"type-data-xs text-text-muted",children:"Collision Rate"}),e.jsxs("span",{className:`type-data-lg font-semibold ${Ve[d]}`,children:[s.collisionRate.toFixed(1),"%"]})]}),e.jsx(tt,{value:s.collisionRate,status:d})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 py-2 border-t border-b border-border-subtle",children:[e.jsxs("div",{className:"text-center cursor-help",title:"Total unique 2-character prefixes observed in packet paths. Each prefix represents the first 2 hex digits of a node's full hash.",children:[e.jsx("div",{className:"type-data-lg font-semibold text-text-primary",children:s.totalPrefixes}),e.jsx("div",{className:"type-data-xs text-text-muted",children:"Prefixes"})]}),e.jsxs("div",{className:"text-center cursor-help",title:"Prefixes that map to exactly one known node. No disambiguation needed—these are definitive identifications.",children:[e.jsx("div",{className:"type-data-lg font-semibold text-signal-good",children:s.unambiguousPrefixes}),e.jsx("div",{className:"type-data-xs text-text-muted",children:"Unique"})]}),e.jsxs("div",{className:"text-center cursor-help",title:"Prefixes matching multiple known nodes. Click a prefix below to explore candidates and see how disambiguation scores them.",children:[e.jsx("div",{className:"type-data-lg font-semibold "+(s.collisionPrefixes>0?"text-signal-critical":"text-text-primary"),children:s.collisionPrefixes}),e.jsx("div",{className:"type-data-xs "+(s.collisionPrefixes>0?"text-signal-critical":"text-text-muted"),children:"Collisions"})]})]}),s.highCollisionPrefixes.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"type-data-xs text-text-muted mb-1.5",children:"Highest Collisions"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.highCollisionPrefixes.map(({prefix:t,candidateCount:s,candidateHashes:a})=>e.jsxs("button",{type:"button",onClick:()=>l(t,a),className:"inline-flex items-center gap-1 px-1.5 py-0.5 min-h-[24px] rounded bg-surface-elevated text-text-secondary type-data-xs font-mono hover:bg-signal-critical/20 hover:text-signal-critical focus:outline-none focus:ring-2 focus:ring-signal-critical/50 transition-colors cursor-pointer touch-manipulation",title:`Click to explore ${s} candidates matching this prefix`,"aria-label":`Explore prefix ${t} with ${s} colliding candidates`,children:[t,e.jsxs("span",{className:"text-signal-critical",children:["×",s]})]},t))})]}),s.lowConfidencePrefixes.length>0&&e.jsx("div",{className:"mt-auto pt-2 border-t border-border-subtle",children:e.jsxs("div",{className:"flex items-start gap-1.5",children:[e.jsx(p,{className:"w-3.5 h-3.5 text-signal-critical mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"type-data-xs text-signal-critical font-medium",children:[e.jsx("span",{className:"text-signal-critical",children:s.lowConfidencePrefixes.length})," prefix",1!==s.lowConfidencePrefixes.length?"es":""," with low confidence"]}),e.jsxs("div",{className:"type-data-xs text-text-muted font-mono truncate",children:[s.lowConfidencePrefixes.slice(0,5).join(", "),s.lowConfidencePrefixes.length>5&&e.jsxs("span",{className:"text-signal-critical",children:[" +",s.lowConfidencePrefixes.length-5," more"]})]})]})]})}),0===s.lowConfidencePrefixes.length&&0===s.collisionPrefixes&&e.jsx("div",{className:"mt-auto pt-2 border-t border-border-subtle",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(x,{className:"w-3.5 h-3.5 text-signal-excellent"}),e.jsx("span",{className:"type-data-xs text-signal-excellent",children:"All prefixes uniquely identified"})]})})]}),e.jsx(pe,{isOpen:!!n,prefix:(null==n?void 0:n.prefix)||"",candidateHashes:(null==n?void 0:n.candidateHashes)||[],onClose:r})]})}function at({icon:t,label:s,value:a,sublabel:n,highlight:i,tooltip:l}){return e.jsxs("div",{className:"flex items-center justify-between py-2 "+(l?"cursor-help":""),title:l,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"icon-xs text-icon-widget",children:t}),e.jsx("span",{className:"type-label text-text-secondary",children:s})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"type-data-sm "+(i?"text-accent-tertiary":"text-text-primary"),children:a}),n&&e.jsx("span",{className:"type-data-xs text-text-muted ml-1",children:n})]})]})}function nt(){const t=P(),s=E().length;if(!t||0===t.totalPaths)return null;const{totalPaths:a,pathsWithGhosts:n,observationOverrideCount:i,tracePacketsProcessed:r,pathPacketsProcessed:o,distantEdgesDiscovered:c,duplicateGroupsFound:d,duplicatePathsUnique:m,echolocationEdgesInferred:h}=t,u=a-n,x=a>0?(u/a*100).toFixed(1):"0",p=a>0?(n/a*100).toFixed(1):"0",k=a>0?(i/a*100).toFixed(1):"0",w=r+o,M=w>0||c>0,C=d>0||h>0;return e.jsxs(me,{children:[e.jsx(he,{title:"Viterbi HMM",icon:e.jsx(f,{}),largeTitle:!0,badge:s>0?`${s} GHOSTS`:void 0}),e.jsxs(je,{children:[e.jsxs("div",{className:"divide-y divide-white/5",children:[e.jsx(at,{icon:e.jsx(f,{className:"w-3.5 h-3.5"}),label:"Paths Decoded",value:a.toLocaleString(),tooltip:"Total packet paths analyzed by the Viterbi HMM algorithm. Each path is a sequence of node prefixes extracted from received packets."}),e.jsx(at,{icon:e.jsx(g,{className:"w-3.5 h-3.5"}),label:"Paths with Ghosts",value:n.toLocaleString(),sublabel:`(${p}%)`,highlight:n>0,tooltip:"Paths containing prefixes that don't match any known node. These 'ghost' prefixes may represent repeaters not yet discovered via direct ADVERT."}),e.jsx(at,{icon:e.jsx(j,{className:"w-3.5 h-3.5"}),label:"Observation Override",value:`${k}%`,sublabel:"of paths",tooltip:"Percentage of paths where real-world observations (signal strength, co-occurrence patterns) overrode the expected geographic transition model. Higher values indicate the algorithm is learning from actual mesh behavior."}),e.jsx(at,{icon:e.jsx(y,{className:"w-3.5 h-3.5"}),label:"Fully Resolved",value:`${x}%`,sublabel:`(${u.toLocaleString()} paths)`,highlight:parseFloat(x)>=90,tooltip:"Percentage of paths where all node prefixes were successfully matched to known nodes. Higher values indicate better mesh visibility - the algorithm can identify every hop in the packet's journey."})]}),M&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-border-subtle",children:[e.jsx("p",{className:"type-micro mb-2",children:"Distant Topology"}),e.jsxs("div",{className:"divide-y divide-white/5",children:[e.jsx(at,{icon:e.jsx(b,{className:"w-3.5 h-3.5"}),label:"TRACE/PATH Packets",value:w.toLocaleString(),sublabel:r>0?`(${r} TRACE)`:void 0,tooltip:"TRACE and PATH packets contain pre-computed routes between distant nodes. These reveal mesh topology beyond what we can directly observe - edges between nodes that may never communicate with us."}),e.jsx(at,{icon:e.jsx(v,{className:"w-3.5 h-3.5"}),label:"Distant Edges",value:c.toLocaleString(),highlight:c>0,tooltip:"Edges discovered from TRACE/PATH packet route data. These represent links between distant nodes that we wouldn't see from normal packet forwarding - revealing deeper mesh structure."})]})]}),C&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-border-subtle",children:[e.jsx("p",{className:"type-micro mb-2",children:"Echolocation"}),e.jsxs("div",{className:"divide-y divide-white/5",children:[e.jsx(at,{icon:e.jsx(N,{className:"w-3.5 h-3.5"}),label:"Duplicate Groups",value:d.toLocaleString(),sublabel:m>0?`(${m} paths)`:void 0,tooltip:"Packets received multiple times via different paths. Each duplicate is an 'echo' that reveals alternate routing through the mesh - like sonar mapping the network structure."}),e.jsx(at,{icon:e.jsx(l,{className:"w-3.5 h-3.5"}),label:"Echo Edges",value:h.toLocaleString(),highlight:h>0,tooltip:"Edges inferred from echolocation analysis. When the same packet arrives via different forwarders, those forwarders are likely within RF range of each other - revealing hidden mesh connectivity."})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-border-subtle cursor-help",title:"Ghost nodes are high-confidence unknown repeaters inferred from path analysis. They appear frequently in packet paths (10+ observations), have consistent neighbor relationships (2+ common neighbors), confidence score ≥30%, and have reasonable location estimates. Check the Contacts page to see them on the map.",children:e.jsxs("p",{className:"type-label text-text-muted",children:[e.jsx("span",{className:"text-accent-tertiary type-data-sm",children:s})," ","unknown repeater",1!==s?"s":""," discovered via HMM analysis"]})})]})]})}function it(){var s,a,n,i,l;const o=L(),d=F(),m=W(),h=D(),u=_(),[x,p]=t.useState(null),[f,g]=t.useState([]),[j,y]=t.useState(null),[b,v]=t.useState(null),[S,T]=t.useState(!0),[$,R]=t.useState(null),[A,P]=t.useState(3),[E,I]=t.useState("airtime"),[Y,K]=t.useState("smooth"),J=t.useCallback(e=>{P(e)},[]),Q=H[A].hours,Z=60*Q,V=B(Q),ee=t.useMemo(()=>0===h.length?null:z(Z,V,h,o),[h,Z,V,o]),{utilSamples:te,startTs:se,endTs:ae}=t.useMemo(()=>{if(!ee)return{utilSamples:[],startTs:0,endTs:0};const{received:e,transmitted:t,forwarded:s,bucket_duration_seconds:a,start_time:n,end_time:i}=ee,l=1e3*a,r=function(e,t){const s=new Map;for(const a of e)s.set(a.start,{...a});for(const a of t){const e=s.get(a.start);e?(e.airtime_ms+=a.airtime_ms,e.count+=a.count):s.set(a.start,{...a})}return Array.from(s.values()).sort((e,t)=>e.start-t.start)}(t,s);return{utilSamples:Ze(e,r,l),startTs:n,endTs:i}},[ee]),ne=t.useMemo(()=>0===te.length?{peak:0,mean:0}:{peak:Math.max(...te.map(e=>e.rxUtilW)),mean:te.reduce((e,t)=>e+t.rxUtilW,0)/te.length},[te]);t.useEffect(()=>{!async function(){var e;R(null);try{const[t,s]=await Promise.all([O(Q),U(Q)]);t.success&&t.data&&p(t.data),s.success&&(null==(e=s.data)?void 0:e.history)&&g(s.data.history)}catch(t){R(t instanceof Error?t.message:"Failed to load chart data")}finally{T(!1)}}()},[Q]);const ie=t.useMemo(()=>{switch(Q){case 72:return 6e5;case 168:return 18e5;default:return 3e5}},[Q]),le=t.useCallback(async()=>{try{const e=await O(Q);e.success&&e.data&&p(e.data)}catch{}},[Q]),re=t.useCallback(async()=>{var e;try{const t=await U(Q);t.success&&(null==(e=t.data)?void 0:e.history)&&g(t.data.history)}catch{}},[Q]);G(le,ie,!0,!0),G(re,ie,!0,!0);const oe=t.useMemo(()=>x&&x.series?x.series.map(e=>({name:e.name,value:e.data.reduce((e,t)=>e+(t[1]??0),0)})).filter(e=>e.value>0):[],[x]),ce=t.useMemo(()=>0===f.length?{timestamps:[],values:[]}:{timestamps:f.map(e=>e.timestamp),values:f.map(e=>e.noise_floor_dbm)},[f]),de=H[A],pe=t.useMemo(()=>{const e=(null==o?void 0:o.neighbors)??{};return Object.fromEntries(Object.entries(e).filter(([e])=>!d.has(e)))},[null==o?void 0:o.neighbors,d]),je=t.useMemo(()=>{const e=Date.now()/1e3-3600*Q;return Object.fromEntries(Object.entries(pe).filter(([,t])=>t.last_seen>=e))},[pe,Q]),ye=t.useMemo(()=>{var e;const t=null==(e=null==o?void 0:o.config)?void 0:e.radio;return{sf:(null==t?void 0:t.spreading_factor)??10,bw:(null==t?void 0:t.bandwidth)??25e4,cr:(null==t?void 0:t.coding_rate)??5,preamble:(null==t?void 0:t.preamble_length)??8}},[null==(s=null==o?void 0:o.config)?void 0:s.radio]),be=X(Q),ve=t.useMemo(()=>{const e=60*Z/be,t=Math.floor(Date.now()/1e3),s=Math.floor(t/e)*e;return{start:s-60*Z,end:s}},[Z,be]);return e.jsxs(ue,{children:[e.jsx(xe,{title:"Statistics",icon:e.jsx(k,{}),controls:e.jsx(q,{ranges:H,selectedIndex:A,onSelect:J})}),$&&e.jsx(me,{className:"border border-accent-red/50 bg-accent-red/10",children:e.jsx("p",{className:"text-accent-red",children:$})}),S?e.jsx(fe,{template:"auto",children:e.jsx(me,{className:"text-center py-12",children:e.jsx("div",{className:"animate-pulse text-text-muted",children:"Loading statistics..."})})}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{template:"hero-tall",children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(r,{}),title:"Type Distribution",badge:de.label,largeTitle:!0,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{smoothing:Y,onChange:K}),e.jsx(Re,{mode:E,onChange:I})]})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Pe,{packets:h,startTs:ve.start,endTs:ve.end,bucketCount:be,radioConfig:ye,mode:E,smoothing:Y})})]})}),e.jsxs(fe,{template:"panel",children:[e.jsx(ge,{span:12,md:6,children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(w,{}),title:"Airtime Utilization",badge:de.label,largeTitle:!0,actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"type-data-xs text-text-muted",children:["Peak ",e.jsxs("span",{className:"text-text-secondary tabular-nums font-medium",children:[ne.peak.toFixed(2),"%"]})]}),e.jsxs("span",{className:"type-data-xs text-text-muted",children:["Mean ",e.jsxs("span",{className:"text-text-secondary tabular-nums font-medium",children:[ne.mean.toFixed(2),"%"]})]})]})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(_e,{samples:te,startTs:se,endTs:ae})})]})}),e.jsx(ge,{span:12,md:6,children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(c,{}),title:"Link Quality",badge:de.label,largeTitle:!0,actions:b?e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 type-data-xs text-text-muted",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:b.zeroHopCount})," nbr"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:b.totalCount})," obs"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-text-secondary tabular-nums font-medium",children:b.maxDistanceKm.toFixed(0)})," km"]})]}):null}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Ge,{neighbors:je,quickNeighbors:m,localLat:(null==(n=null==(a=null==o?void 0:o.config)?void 0:a.repeater)?void 0:n.latitude)??0,localLon:(null==(l=null==(i=null==o?void 0:o.config)?void 0:i.repeater)?void 0:l.longitude)??0,onStatsChange:v})})]})})]}),e.jsxs(fe,{template:"panel",children:[e.jsx(ge,{span:12,md:6,children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(M,{}),title:"Packet Types",largeTitle:!0}),e.jsx("div",{className:"flex-1 min-h-0",children:oe.length>0?e.jsx(Ne,{data:oe}):e.jsx("div",{className:"h-full flex items-center justify-center text-text-muted",children:"No packet type data available"})})]})}),e.jsx(ge,{span:12,md:6,children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(C,{}),title:"Network Composition",badge:de.label,largeTitle:!0}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Qe,{neighbors:je})})]})})]}),e.jsxs(fe,{template:"panel",children:[e.jsx(ge,{span:12,md:6,children:e.jsx(st,{})}),e.jsx(ge,{span:12,md:6,children:e.jsx(nt,{})})]}),e.jsx(fe,{template:"panel",children:e.jsx(ge,{span:12,children:e.jsxs(me,{isLoaded:u,skeletonType:"chart",children:[e.jsx(he,{icon:e.jsx(N,{}),title:"RF Noise Floor",largeTitle:!0,actions:j?e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3",children:[e.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["min ",e.jsx("span",{className:"text-text-secondary tabular-nums",children:j.min.toFixed(0)})]}),e.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["avg ",e.jsx("span",{className:"text-text-secondary tabular-nums",children:j.avg.toFixed(0)})]}),e.jsxs("span",{className:"type-data-xs text-text-muted whitespace-nowrap",children:["max ",e.jsx("span",{className:"text-text-secondary tabular-nums",children:j.max.toFixed(0)})]}),e.jsx("span",{className:"type-data-xs text-text-muted",children:"dBm"})]}):e.jsx("span",{className:"type-data-xs text-text-muted",children:"dBm"})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Ye,{timestamps:ce.timestamps,values:ce.values,onStatsChange:y})})]})})})]})]})}export{it as default};
